<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <link rel=stylesheet href="css/index.css">
    <title>js_study</title>
  </head>
  <body>
    <script type="text/javascript">
      $(document).ready(function(){
        var raindrops = [];
        var numOfDrops;

          function setup() {
          	numOfDrops = windowWidth/2;
            createCanvas(windowWidth, windowHeight);
            for(var i = 0; i < numOfDrops; i++) {
              raindrops[i] = new Raindrop();
            }
          }

          function draw() {
            background(0);

            for(var i = 0; i < numOfDrops; i++) {
              raindrops[i].fall();
              raindrops[i].show();
              if(raindrops[i].reachedBottom()) {
                splash(raindrops[i].x, raindrops[i].y, raindrops[i].z, raindrops[i].r, raindrops[i].g, raindrops[i].b);
                raindrops[i].y = 0;
              }
            }
          }

          function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
          }

          function splash(x, y, z, r, g, b) {
          	fill (r, g, b);
          	ellipse(x, y, 20, 20);
          }

          function Raindrop(x,y) {
            this.x = random(windowWidth);
            this.y = random(-100, -600);

            this.z = random(1,3);

            this.speed = random(1, 3);
          	this.gravity = random(1,2);
            this.len = random(3, 10);
            this.r = random(255);
            this.g = random(255);
            this.b = random(255);

            this.fall = function() {
              this.y += this.speed;
              this.y += this.gravity;
            }

            this.reachedBottom = function() {
              if(this.y > windowHeight) {
                return true;
              } else {
                return false;
              }
            }

            this.show = function() {
              strokeWeight(this.z);
              stroke(this.r, this.g, this.b);
              line(this.x, this.y, this.x, this.y + this.len);
            }
          }
      });
    </script>
  </body>
</html>
